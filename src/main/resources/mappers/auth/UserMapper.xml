<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.goodsple.features.auth.mapper.UserMapper">

    <insert id="createUser" parameterType="com.goodsple.features.auth.entity.User">
        INSERT INTO users (
            login_id, password, name, nickname, email,
            phone_number, birth_date, gender, role,
            suspension_status, login_type, is_banned_from_auction, kakao_id
        ) VALUES (
                     #{loginId}, #{password}, #{name}, #{nickname}, #{email},
                     #{phoneNumber}, #{birthDate},
                     #{gender, jdbcType=OTHER},
                     #{role, jdbcType=OTHER},
                     #{suspensionStatus, jdbcType=OTHER},
                     #{loginType, jdbcType=OTHER},
                     #{isBannedFromAuction}, #{kakaoId}
                 )
    </insert>

    <select id="existsByLoginId" parameterType="String" resultType="java.lang.Boolean">
        SELECT EXISTS(SELECT 1 FROM users WHERE login_id = #{loginId})
    </select>

    <select id="existsByNickname" parameterType="String" resultType="java.lang.Boolean">
        SELECT EXISTS(SELECT 1 FROM users WHERE nickname = #{nickname})
    </select>

    <select id="existsByEmail" parameterType="String" resultType="java.lang.Boolean">
        SELECT EXISTS(SELECT 1 FROM users WHERE email = #{email})
    </select>

    <select id="existsByPhoneNumber" parameterType="String" resultType="java.lang.Boolean">
        SELECT EXISTS(SELECT 1 FROM users WHERE phone_number = #{phoneNumber})
    </select>

    <select id="findByLoginId" parameterType="String" resultType="com.goodsple.features.auth.entity.User">
        SELECT * FROM users WHERE login_id = #{loginId}
    </select>

    <select id="findByKakaoId" parameterType="String" resultType="com.goodsple.features.auth.entity.User">
        SELECT * FROM users WHERE kakao_id = #{kakaoId}
    </select>

</mapper>