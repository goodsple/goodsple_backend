<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.goodsple.features.admin.prohibitedWord.mapper.ProhibitedWordMapper">

    <!-- 전체 조회 -->
    <select id="selectAllWords" resultType="com.goodsple.features.admin.prohibitedWord.dto.ProhibitedWordDTO">
        SELECT word_id AS wordId,
               word,
               word_is_active AS wordIsActive,
               word_created_at AS wordCreatedAt
        FROM prohibited_word
        ORDER BY word_created_at DESC
    </select>

    <!-- 금칙어 추가 -->
    <insert id="insertWord">
        INSERT INTO prohibited_word (word)
        VALUES (#{word})
    </insert>

    <!-- 금칙어 삭제 -->
    <delete id="deleteWords">
        DELETE FROM prohibited_word
        WHERE word_id IN
        <foreach collection="ids" item="id" open="(" separator="," close=")">
            #{id}
        </foreach>
    </delete>

    <!--  금칙어 중복 체크  -->
    <select id="countByWord" resultType="int">
        SELECT COUNT(*)
        FROM prohibited_word
        WHERE word = #{word}
    </select>

    <!--  금칙어 활성화/비활성화 토글  -->
    <update id="toggleWordActive">
        UPDATE prohibited_word
        SET word_is_active = NOT word_is_active
        WHERE word_id = #{id}
    </update>

    <!-- 활성화된 금칙어만 조회 -->
    <select id="selectActiveWords" resultType="String">
        SELECT word
        FROM prohibited_word
        WHERE word_is_active = true
    </select>


</mapper>
